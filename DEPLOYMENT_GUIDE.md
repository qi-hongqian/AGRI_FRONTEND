# å†œä¸šå¹³å°å¾®æœåŠ¡éƒ¨ç½²ä¸æµ‹è¯•æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬å†œä¸šå¹³å°é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š
- ğŸ  **é¦–é¡µèµ„è®¯æœåŠ¡** (ç«¯å£ 8082) - è½®æ’­å›¾ã€æ–°é—»å†…å®¹ç®¡ç†
- ğŸ’¬ **è®ºå›æœåŠ¡** (ç«¯å£ 8083) - å¸–å­ã€è¯„è®ºã€ç”¨æˆ·äº’åŠ¨
- ğŸ›’ **å•†åŸæœåŠ¡** (ç«¯å£ 8084) - å•†å“ã€è®¢å•ã€æ”¯ä»˜ç®¡ç†
- ğŸ¯ **ç­”é¢˜æœåŠ¡** (ç«¯å£ 8081) - é¢˜åº“ã€ç­”é¢˜è®°å½•ã€ç§¯åˆ†ç³»ç»Ÿ
- ğŸ‘¤ **ç”¨æˆ·æœåŠ¡** (ç«¯å£ 8080) - ç”¨æˆ·è®¤è¯ã€ä¸ªäººä¿¡æ¯ç®¡ç†

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¾®æœåŠ¡æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ Vue.js   â”‚    â”‚   API ç½‘å…³      â”‚    â”‚   è´Ÿè½½å‡è¡¡å™¨     â”‚
â”‚   (ç§»åŠ¨ç«¯)       â”‚â—„â”€â”€â–ºâ”‚   (ç»Ÿä¸€å…¥å£)     â”‚â—„â”€â”€â–ºâ”‚   (Nginx)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·æœåŠ¡      â”‚    â”‚   å†…å®¹æœåŠ¡      â”‚    â”‚   è®ºå›æœåŠ¡      â”‚
â”‚   ç«¯å£: 8080    â”‚    â”‚   ç«¯å£: 8082    â”‚    â”‚   ç«¯å£: 8083    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å•†åŸæœåŠ¡      â”‚    â”‚   ç­”é¢˜æœåŠ¡      â”‚    â”‚   æ•°æ®åº“é›†ç¾¤     â”‚
â”‚   ç«¯å£: 8084    â”‚    â”‚   ç«¯å£: 8081    â”‚â—„â”€â”€â–ºâ”‚   (PostgreSQL)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ç¯å¢ƒé…ç½®

### 1. å¼€å‘ç¯å¢ƒè¦æ±‚
- **Node.js**: 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **Java**: 11 æˆ–æ›´é«˜ç‰ˆæœ¬ (Spring Boot)
- **PostgreSQL**: 13.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **Redis**: 6.x æˆ–æ›´é«˜ç‰ˆæœ¬ (ç¼“å­˜)
- **Nginx**: 1.20+ (è´Ÿè½½å‡è¡¡)

### 2. æ•°æ®åº“é…ç½®
```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE agriculture_platform;

-- åˆ›å»ºç”¨æˆ·
CREATE USER agri_user WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE agriculture_platform TO agri_user;

-- è¿æ¥æ•°æ®åº“
\c agriculture_platform;

-- æ‰§è¡Œæ•°æ®åº“æ¶æ„è„šæœ¬ (å‚è€ƒæ•°æ®åº“è®¾è®¡æ–‡æ¡£)
```

### 3. Redis é…ç½®
```bash
# å®‰è£… Redis (Ubuntu/Debian)
sudo apt update
sudo apt install redis-server

# é…ç½® Redis
sudo nano /etc/redis/redis.conf

# å¯ç”¨æŒä¹…åŒ–
appendonly yes
save 900 1
save 300 10
save 60 10000

# é‡å¯ Redis
sudo systemctl restart redis-server
```

## ğŸ—ï¸ åç«¯æœåŠ¡éƒ¨ç½²

### 1. ç”¨æˆ·æœåŠ¡ (ç«¯å£ 8080)
```bash
# å…‹éš†ä»£ç 
git clone https://github.com/your-org/user-service.git
cd user-service

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥

# æ„å»ºé¡¹ç›®
./mvnw clean package

# å¯åŠ¨æœåŠ¡
java -jar target/user-service-0.0.1-SNAPSHOT.jar --server.port=8080
```

### 2. ç­”é¢˜æœåŠ¡ (ç«¯å£ 8081)
```bash
git clone https://github.com/your-org/quiz-service.git
cd quiz-service

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env

# æ„å»ºå’Œå¯åŠ¨
./mvnw clean package
java -jar target/quiz-service-0.0.1-SNAPSHOT.jar --server.port=8081
```

### 3. å†…å®¹æœåŠ¡ (ç«¯å£ 8082)
```bash
git clone https://github.com/your-org/content-service.git
cd content-service

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env

# æ„å»ºå’Œå¯åŠ¨
./mvnw clean package
java -jar target/content-service-0.0.1-SNAPSHOT.jar --server.port=8082
```

### 4. è®ºå›æœåŠ¡ (ç«¯å£ 8083)
```bash
git clone https://github.com/your-org/forum-service.git
cd forum-service

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env

# æ„å»ºå’Œå¯åŠ¨
./mvnw clean package
java -jar target/forum-service-0.0.1-SNAPSHOT.jar --server.port=8083
```

### 5. å•†åŸæœåŠ¡ (ç«¯å£ 8084)
```bash
git clone https://github.com/your-org/mall-service.git
cd mall-service

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env

# æ„å»ºå’Œå¯åŠ¨
./mvnw clean package
java -jar target/mall-service-0.0.1-SNAPSHOT.jar --server.port=8084
```

## ğŸŒ å‰ç«¯éƒ¨ç½²

### 1. æ„å»ºå‰ç«¯é¡¹ç›®
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd android_design

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æ„å»ºç»“æœå°†åœ¨ dist/ ç›®å½•
```

### 2. é…ç½® API ç½‘å…³
åˆ›å»º `nginx.conf` æ–‡ä»¶ï¼š
```nginx
upstream user_service {
    server localhost:8080;
}

upstream quiz_service {
    server localhost:8081;
}

upstream content_service {
    server localhost:8082;
}

upstream forum_service {
    server localhost:8083;
}

upstream mall_service {
    server localhost:8084;
}

server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/agriculture-platform/dist;
        try_files $uri $uri/ /index.html;
    }

    # API ç½‘å…³ - ç”¨æˆ·æœåŠ¡
    location /api/user/ {
        proxy_pass http://user_service/api/user/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # API ç½‘å…³ - ç­”é¢˜æœåŠ¡
    location /api/quiz/ {
        proxy_pass http://quiz_service/api/quiz/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # API ç½‘å…³ - å†…å®¹æœåŠ¡
    location /api/content/ {
        proxy_pass http://content_service/api/content/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # API ç½‘å…³ - è®ºå›æœåŠ¡
    location /api/forum/ {
        proxy_pass http://forum_service/api/forum/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # API ç½‘å…³ - å•†åŸæœåŠ¡
    location /api/mall/ {
        proxy_pass http://mall_service/api/mall/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### 3. å¯åŠ¨ Nginx
```bash
# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡æ–°åŠ è½½é…ç½®
sudo nginx -s reload

# å¯åŠ¨ Nginx
sudo systemctl start nginx
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•
```bash
# å‰ç«¯å•å…ƒæµ‹è¯•
npm run test:unit

# åç«¯å•å…ƒæµ‹è¯• (æ¯ä¸ªæœåŠ¡)
./mvnw test
```

### 2. é›†æˆæµ‹è¯•
åˆ›å»º `tests/integration/api.test.js`ï¼š
```javascript
import axios from 'axios'
import { expect } from 'chai'

describe('API Integration Tests', () => {
  const baseURL = 'http://localhost:8080'
  
  describe('User Service', () => {
    it('should register a new user', async () => {
      const response = await axios.post(`${baseURL}/api/user/register`, {
        username: 'testuser',
        email: 'test@example.com',
        password: 'test123456'
      })
      
      expect(response.status).to.equal(200)
      expect(response.data.success).to.be.true
    })
  })
  
  describe('Content Service', () => {
    it('should fetch carousel data', async () => {
      const response = await axios.get('http://localhost:8082/api/content/carousel')
      
      expect(response.status).to.equal(200)
      expect(response.data.success).to.be.true
      expect(response.data.data).to.be.an('array')
    })
  })
})
```

### 3. æ€§èƒ½æµ‹è¯•
ä½¿ç”¨ Apache JMeter æˆ– Postman è¿›è¡Œè´Ÿè½½æµ‹è¯•ï¼š

```bash
# å®‰è£… JMeter
wget https://downloads.apache.org//jmeter/binaries/apache-jmeter-5.5.zip
unzip apache-jmeter-5.5.zip

# è¿è¡Œæ€§èƒ½æµ‹è¯•
./apache-jmeter-5.5/bin/jmeter -n -t performance-test.jmx -l results.jtl
```

### 4. ç«¯åˆ°ç«¯æµ‹è¯•
ä½¿ç”¨ Cypress è¿›è¡Œ E2E æµ‹è¯•ï¼š
```bash
# å®‰è£… Cypress
npm install --save-dev cypress

# åˆ›å»ºæµ‹è¯•ç”¨ä¾‹
# cypress/e2e/agriculture-platform.cy.js

describe('Agriculture Platform E2E', () => {
  it('should complete user registration flow', () => {
    cy.visit('/')
    cy.get('[data-testid="register-button"]').click()
    cy.get('[data-testid="username-input"]').type('testuser')
    cy.get('[data-testid="email-input"]').type('test@example.com')
    cy.get('[data-testid="password-input"]').type('test123456')
    cy.get('[data-testid="submit-button"]').click()
    
    cy.get('[data-testid="success-message"]').should('be.visible')
  })
  
  it('should navigate through all modules', () => {
    cy.visit('/')
    
    // æµ‹è¯•åº•éƒ¨å¯¼èˆª
    cy.get('[data-testid="bottom-nav-forum"]').click()
    cy.url().should('include', '/forum')
    
    cy.get('[data-testid="bottom-nav-quiz"]').click()
    cy.url().should('include', '/quiz')
    
    cy.get('[data-testid="bottom-nav-mall"]').click()
    cy.url().should('include', '/mall')
    
    cy.get('[data-testid="bottom-nav-profile"]').click()
    cy.url().should('include', '/profile')
  })
})
```

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### 1. åº”ç”¨ç›‘æ§
ä½¿ç”¨ Spring Boot Actuatorï¼š
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

é…ç½® `application.yml`ï¼š
```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true
```

### 2. æ—¥å¿—é…ç½®
```xml
<configuration>
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/application.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/application-%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    
    <root level="INFO">
        <appender-ref ref="FILE"/>
    </root>
</configuration>
```

### 3. å¥åº·æ£€æŸ¥ç«¯ç‚¹
```bash
# æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8080/actuator/health
curl http://localhost:8081/actuator/health
curl http://localhost:8082/actuator/health
curl http://localhost:8083/actuator/health
curl http://localhost:8084/actuator/health
```

## ğŸ” å®‰å…¨å»ºè®®

### 1. HTTPS é…ç½®
```nginx
server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    ssl_certificate /etc/ssl/certs/your-domain.crt;
    ssl_certificate_key /etc/ssl/private/your-domain.key;
    
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    # å…¶ä»–é…ç½®...
}
```

### 2. æ•°æ®åº“å®‰å…¨
- ä½¿ç”¨å¼ºå¯†ç 
- é™åˆ¶æ•°æ®åº“è®¿é—®IP
- å®šæœŸå¤‡ä»½æ•°æ®
- å¯ç”¨SSLè¿æ¥

### 3. API å®‰å…¨
- å®ç°JWTè®¤è¯
- æ·»åŠ è¯·æ±‚é¢‘ç‡é™åˆ¶
- è¾“å…¥æ•°æ®éªŒè¯
- SQLæ³¨å…¥é˜²æŠ¤

## ğŸ“± ç§»åŠ¨ç«¯éƒ¨ç½²

### 1. Capacitor é…ç½®
```bash
# æ·»åŠ  Capacitor
npm install @capacitor/core @capacitor/cli
npx cap init "Agriculture Platform" com.agriculture.platform

# æ·»åŠ å¹³å°
npm install @capacitor/android @capacitor/ios
npx cap add android
npx cap add ios

# æ„å»ºç§»åŠ¨ç«¯åº”ç”¨
npm run build
npx cap sync
npx cap open android
```

### 2. ç§»åŠ¨ç«¯ä¼˜åŒ–
- å¯ç”¨ä»£ç åˆ†å‰²
- å›¾ç‰‡æ‡’åŠ è½½
- ç¦»çº¿ç¼“å­˜ç­–ç•¥
- æ¨é€é€šçŸ¥é›†æˆ

## ğŸš€ æŒç»­é›†æˆ/éƒ¨ç½² (CI/CD)

### GitHub Actions é…ç½®
```yaml
name: Deploy Agriculture Platform

on:
  push:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    - name: Install dependencies
      run: npm ci
    - name: Run tests
      run: npm test
    - name: Build
      run: npm run build

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
    - name: Deploy to production
      run: |
        # éƒ¨ç½²è„šæœ¬
        ssh user@server 'bash /path/to/deploy.sh'
```

## ğŸ“ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥ç«¯å£å ç”¨
   - éªŒè¯æ•°æ®åº“è¿æ¥
   - æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

2. **å‰ç«¯APIè°ƒç”¨å¤±è´¥**
   - æ£€æŸ¥APIç½‘å…³é…ç½®
   - éªŒè¯è·¨åŸŸè®¾ç½®
   - ç¡®è®¤æœåŠ¡å¥åº·çŠ¶æ€

3. **æ€§èƒ½é—®é¢˜**
   - ç›‘æ§æ•°æ®åº“æŸ¥è¯¢
   - æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡
   - åˆ†æAPIå“åº”æ—¶é—´

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u nginx -f

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/application.log

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
sudo tail -f /var/log/postgresql/postgresql-*.log
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“ä¼˜åŒ–**
   - æ·»åŠ é€‚å½“ç´¢å¼•
   - ä¼˜åŒ–æŸ¥è¯¢è¯­å¥
   - å®æ–½è¯»å†™åˆ†ç¦»

2. **ç¼“å­˜ç­–ç•¥**
   - Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
   - CDNåŠ é€Ÿé™æ€èµ„æº
   - æµè§ˆå™¨ç¼“å­˜æ§åˆ¶

3. **ä»£ç ä¼˜åŒ–**
   - å¼‚æ­¥å¤„ç†è€—æ—¶æ“ä½œ
   - æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
   - JVMå‚æ•°è°ƒä¼˜

## ğŸ“š åç»­è§„åˆ’

1. **ç›‘æ§ä»ªè¡¨æ¿** - é›†æˆGrafana + Prometheus
2. **æ—¥å¿—èšåˆ** - ä½¿ç”¨ELK Stack (Elasticsearch + Logstash + Kibana)
3. **å®¹å™¨åŒ–éƒ¨ç½²** - Docker + Kubernetes
4. **è‡ªåŠ¨æ‰©ç¼©å®¹** - åŸºäºè´Ÿè½½è‡ªåŠ¨è°ƒæ•´æœåŠ¡å®ä¾‹
5. **è“ç»¿éƒ¨ç½²** - é›¶åœæœºæ—¶é—´éƒ¨ç½²ç­–ç•¥

---

**æ³¨æ„**: æœ¬æŒ‡å—åŸºäºå½“å‰æ¶æ„è®¾è®¡ï¼Œå®é™…éƒ¨ç½²æ—¶è¯·æ ¹æ®å…·ä½“ç¯å¢ƒå’Œéœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯æ‰€æœ‰æ­¥éª¤åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚